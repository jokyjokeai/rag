# =============================================================================
# RAG Local System - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values

# =============================================================================
# API KEYS
# =============================================================================

# Brave Search API (Required for web search)
# Get your free API key at: https://brave.com/search/api/
# Free tier: 2000 queries/day
BRAVE_API_KEY=your_brave_api_key_here

# YouTube Data API v3 (Optional - enhances video metadata)
# Get your API key at: https://console.cloud.google.com/apis/credentials
YOUTUBE_API_KEY=your_youtube_api_key_here

# GitHub Personal Access Token (Optional - enhances repo access)
# Generate at: https://github.com/settings/tokens
GITHUB_TOKEN=your_github_token_here

# =============================================================================
# OLLAMA CONFIGURATION
# =============================================================================

# Ollama server URL
OLLAMA_HOST=http://localhost:11434

# Ollama model for query analysis
OLLAMA_MODEL=mistral:7b

# Ollama model for metadata enrichment
OLLAMA_METADATA_MODEL=mistral:7b

# =============================================================================
# QUERY ANALYSIS
# =============================================================================

# Enable competitor technology queries (true/false)
# When searching for "FastAPI", also search for Flask, Django, etc.
ENABLE_COMPETITOR_QUERIES=true

# =============================================================================
# WEB CRAWLING BEHAVIOR
# =============================================================================

# NOTE: The system automatically crawls documentation sites (docs.*, wiki, tutorial, etc.)
# Other websites are scraped as single pages only.
#
# Crawled automatically:
#   - docs.python.org, readthedocs.io, gitbook.io
#   - example.com/tutorial/, example.com/blog/
#
# Scraped only (single page):
#   - company.com/product, random-site.com
#
# See README.md section "Comportement du crawling" or
# documentation/CRAWLING_BEHAVIOR.md for complete details.

# =============================================================================
# DATABASE PATHS
# =============================================================================

# ChromaDB vector database path
CHROMA_DB_PATH=./data/chroma_db

# SQLite database path (URL queue)
SQLITE_DB_PATH=./data/discovered_urls.db

# =============================================================================
# PROCESSING CONFIGURATION
# =============================================================================

# Batch processing size
BATCH_SIZE=10

# Number of concurrent workers
CONCURRENT_WORKERS=3

# Maximum retry attempts for failed operations
MAX_RETRIES=3

# Delay between batches (seconds)
DELAY_BETWEEN_BATCHES=30

# =============================================================================
# CHUNKING CONFIGURATION
# =============================================================================

# Maximum chunk size in tokens
MAX_CHUNK_SIZE=512

# Minimum chunk size in tokens
MIN_CHUNK_SIZE=100

# Chunk overlap in tokens
CHUNK_OVERLAP=50

# =============================================================================
# EMBEDDINGS CONFIGURATION
# =============================================================================

# Sentence transformer model for embeddings
EMBEDDING_MODEL=all-MiniLM-L6-v2

# Device for embeddings (cpu or cuda)
EMBEDDING_DEVICE=cpu

# =============================================================================
# YOUTUBE CONFIGURATION
# =============================================================================

# Default max videos per channel (C option)
YOUTUBE_CHANNEL_MAX_VIDEOS_DEFAULT=50

# Full crawl max videos (A option)
YOUTUBE_CHANNEL_MAX_VIDEOS_FULL=500

# Prioritize YouTube channels over individual videos
YOUTUBE_PRIORITIZE_CHANNELS=true

# Include masterclass/long videos in search results
YOUTUBE_SEARCH_MASTERCLASS=true

# =============================================================================
# YOUTUBE RATE LIMITING (Avoid IP bans)
# =============================================================================

# IMPORTANT: YouTube blocks IPs that make too many concurrent requests
# These settings prevent "YouTube is blocking requests from your IP" errors

# Maximum concurrent video scraping (RECOMMENDED: 3-5)
# Lower = Slower but safer. Higher = Faster but risk of IP ban
YOUTUBE_CONCURRENT_WORKERS=3

# Delay between requests in seconds (RECOMMENDED: 1.0-2.0)
# Simulates human behavior and prevents rate limiting
YOUTUBE_DELAY_BETWEEN_REQUESTS=1.0

# =============================================================================
# SCHEDULER CONFIGURATION
# =============================================================================

# Enable automatic refresh (true/false)
ENABLE_AUTO_REFRESH=true

# Refresh schedule (cron format)
# Example: "0 3 * * 1" = Every Monday at 3 AM
REFRESH_SCHEDULE=0 3 * * 1

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log file path
LOG_FILE=./data/logs/rag_system.log

# =============================================================================
# RATE LIMITING
# =============================================================================

# Rate limit per domain (requests per second)
RATE_LIMIT_PER_DOMAIN=1.0

# Brave Search API daily quota (free tier default)
BRAVE_DAILY_QUOTA=2000

# Track Brave API usage (true/false)
TRACK_BRAVE_USAGE=true
